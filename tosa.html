<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>土佐日記</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    #content {
      flex: 1;
      padding: 20px;
      text-align: center;
    }
    #text {
      font-size: 20px;
      margin-bottom: 20px;
    }
    #footer {
      position: sticky;
      bottom: 0;
      background-color: #f0f0f0;
      text-align: center;
      padding: 10px 0;
      border-top: 1px solid #ddd;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      margin: 5px;
    }
    button:hover {
      background-color: #0056b3;
    }
    .analysis {
      font-size: 0.8em;
      color: gray;
      margin-top: 10px;
      text-align: left;
      word-break: break-all;
    }
  </style>
</head>
<body>
  <header>
    <h1>古文ヘルパー</h1>
    <nav>
      <a href="index.html">ホーム</a>
    </nav>
  </header>
  <div id="content">
    <div id="text">
      <main>
        <article>
          <h2>土佐日記</h2>
          <section>
            <p>
              七日。今日、河尻に船入り立ちて、こぎ上るに、河の水干て、なやみわづらふ。船の上ることいとかたし。
            </p>
            <div class="analysis">
              七日（名詞）<br>
              今日（名詞）<br>
              河尻（名詞）<br>
              に（格助詞）<br>
              船（名詞）<br>
              入り（動詞・連用形・四段活用）<br>
              立ち（動詞・連用形・四段活用）<br>
              て（接続助詞）<br>
              こぎ（動詞・連用形・四段活用）<br>
              上る（動詞・連体形・四段活用）<br>
              に（格助詞）<br>
              河（名詞）<br>
              の（格助詞）<br>
              水（名詞）<br>
              干て（動詞・連用形・下二段活用）<br>
              なやみ（動詞・連用形・四段活用）<br>
              わづらふ（動詞・終止形・四段活用）<br>
              船（名詞）<br>
              の（格助詞）<br>
              上る（動詞・連体形・四段活用）<br>
              こと（名詞）<br>
              いと（副詞）<br>
              かたし（形容詞・終止形）<br>
            </div>
          </section>
          <section>
            <p>
              かかるあひだに、船君の病者、もとよりこちごちしき人にて、かうやうのこと、さらに知らざりけり。かかれども、淡路たうめの歌に愛でて、都誇りにもやあらむ、からくして、あやしき歌ひねり出だせり。
            </p>
            <div class="analysis">
              かかる（連体詞）<br>
              あひだ（名詞）<br>
              に（格助詞）<br>
              船君（名詞）<br>
              の（格助詞）<br>
              病者（名詞）<br>
              もとより（副詞）<br>
              こちごちしき（形容詞・連体形）<br>
              人（名詞）<br>
              にて（格助詞）<br>
              かうやう（名詞）<br>
              の（格助詞）<br>
              こと（名詞）<br>
              さらに（副詞）<br>
              知ら（動詞・未然形・四段活用）<br>
              ざり（助動詞・打消・連用形）<br>
              けり（助動詞・過去・終止形）<br>
              かかれども（接続詞）<br>
              淡路（名詞）<br>
              たうめ（名詞）<br>
              の（格助詞）<br>
              歌（名詞）<br>
              に（格助詞）<br>
              愛で（動詞・連用形・下二段活用）<br>
              て（接続助詞）<br>
              都（名詞）<br>
              誇り（名詞）<br>
              にも（格助詞＋係助詞）<br>
              や（係助詞）<br>
              あら（動詞・未然形・ラ変）<br>
              む（助動詞・推量・終止形）<br>
              からくして（副詞）<br>
              あやしき（形容詞・連体形）<br>
              歌（名詞）<br>
              ひねり出だせ（動詞・連用形・下二段活用）<br>
              り（助動詞・完了・連用形）<br>
            </div>
          </section>
          <section>
            <p>
              その歌は、<br>
              <span style="margin-left:2em;">来と来ては川上り路の水を浅み船もわが身もなづむ今日かな</span>
            </p>
            <div class="analysis">
              来（動詞・連用形・カ変）<br>
              と（助詞）<br>
              来（動詞・連用形・カ変）<br>
              て（接続助詞）<br>
              は（係助詞）<br>
              川上り路（名詞）<br>
              の（格助詞）<br>
              水（名詞）<br>
              を（格助詞）<br>
              浅み（形容詞・連用形・下二段活用）<br>
              船（名詞）<br>
              も（係助詞）<br>
              わが（連体詞）<br>
              身（名詞）<br>
              も（係助詞）<br>
              なづむ（動詞・終止形・四段活用）<br>
              今日（名詞）<br>
              かな（終助詞）<br>
            </div>
          </section>
          <section>
            <p>
              これは、病ひをすればよめるなるべし。一歌にことのあかねば、いまひとつ、
            </p>
            <div class="analysis">
              これ（指示語）<br>
              は（係助詞）<br>
              病ひ（名詞）<br>
              を（格助詞）<br>
              すれ（動詞・已然形・サ変）<br>
              ば（接続助詞）<br>
              よめる（動詞・連体形・下二段活用）<br>
              なり（助動詞・断定・終止形）<br>
              べし（助動詞・推量・終止形）<br>
              一歌（名詞）<br>
              に（格助詞）<br>
              こと（名詞）<br>
              の（格助詞）<br>
              あかね（動詞・未然形・下二段活用）<br>
              ば（接続助詞）<br>
              いまひとつ（名詞）<br>
            </div>
          </section>
          <section>
            <p>
              <span style="margin-left:2em;">とくと思ふ船なやますはわがために水の心の浅きなりけり</span>
            </p>
            <div class="analysis">
              とく（副詞）<br>
              と（格助詞）<br>
              思ふ（動詞・連体形・四段活用）<br>
              船（名詞）<br>
              なやます（動詞・連体形・四段活用）<br>
              は（係助詞）<br>
              わが（連体詞）<br>
              ため（名詞）<br>
              に（格助詞）<br>
              水（名詞）<br>
              の（格助詞）<br>
              心（名詞）<br>
              の（格助詞）<br>
              浅き（形容詞・連体形）<br>
              なり（助動詞・断定・連用形）<br>
              けり（助動詞・過去・終止形）<br>
            </div>
          </section>
          <section>
            <p>
              この歌は、都近くなりぬるよろこびにたへずして、いへるなるべし。淡路の御の歌におとれり。「ねたき。いはざらましものを」とくやしがるうちに、夜になりて寝にけり。
            </p>
            <div class="analysis">
              この（連体詞）<br>
              歌（名詞）<br>
              は（係助詞）<br>
              都（名詞）<br>
              近く（形容詞・連用形）<br>
              なり（動詞・連用形・四段活用）<br>
              ぬる（助動詞・完了・連体形）<br>
              よろこび（名詞）<br>
              に（格助詞）<br>
              たへ（動詞・連用形・下二段活用）<br>
              ず（助動詞・打消・連用形）<br>
              して（接続助詞）<br>
              いへる（動詞・連体形・下二段活用）<br>
              なり（助動詞・断定・終止形）<br>
              べし（助動詞・推量・終止形）<br>
              淡路（名詞）<br>
              の（格助詞）<br>
              御（名詞）<br>
              の（格助詞）<br>
              歌（名詞）<br>
              に（格助詞）<br>
              おとれ（動詞・已然形・下二段活用）<br>
              り（助動詞・完了・連用形）<br>
              ねたき（形容詞・連体形）<br>
              いは（動詞・未然形・四段活用）<br>
              ざら（助動詞・打消・未然形）<br>
              まし（助動詞・反実仮想・終止形）<br>
              もの（名詞）<br>
              を（格助詞）<br>
              と（格助詞）<br>
              くやしがる（動詞・終止形・四段活用）<br>
              うち（名詞）<br>
              に（格助詞）<br>
              夜（名詞）<br>
              に（格助詞）<br>
              なり（動詞・連用形・四段活用）<br>
              て（接続助詞）<br>
              寝（動詞・連用形・下二段活用）<br>
              に（助動詞・完了・連用形）<br>
              けり（助動詞・過去・終止形）<br>
            </div>
          </section>
        </article>
      </main>
    </div>
  </div>
  <div id="footer">
    <button id="changeButton">現代語訳する</button>
    <button id="resetButton" style="display: none;">もとに戻す</button>
    <button id="toggleAnalysisButton">品詞分解を消す</button>
  </div>
  <script>
    // ボタンとテキストの要素を取得
    const textElement = document.getElementById('text');
    const changeButton = document.getElementById('changeButton');
    const resetButton = document.getElementById('resetButton');
    const toggleAnalysisButton = document.getElementById('toggleAnalysisButton');
    const originalContent = textElement.innerHTML;

    // 現代語訳の内容
    const translatedContent = `
      <main>
        <article>
          <h2>現代語訳</h2>
          <section>
            <p>
              七日。今日、河尻に船を止めて船を漕ぎ上がろうとしたが、川の水が干上がっていて、とても苦労した。船を上らせるのはとても難しい。
            </p>
          </section>
          <section>
            <p>
              そんなとき、船頭の病人はもともと気むずかしい人で、このようなことはまったく知らなかった。しかし淡路の歌に感動し、都で自慢したいのだろうか、なんとかして妙な歌をひねり出した。その歌は、
            </p>
          </section>
          <section>
            <p style="margin-left:2em;">
              来と来ては 川上り路の 水を浅み 船もわが身も なづむ今日かな
            </p>
          </section>
          <section>
            <p>
              これは病気ゆえに詠んだものだろう。一首では思いが伝わらないので、もう一首、
            </p>
          </section>
          <section>
            <p style="margin-left:2em;">
              早く進みたいと思うのに 船がなかなか進まないのは、私のせいで水の心が浅いのだろう
            </p>
          </section>
          <section>
            <p>
              この歌は、都が近づいてきた喜びに耐えきれずに詠んだらしい。淡路の御の歌には及ばない。「悔しい、言わなければよかったのに」と悔しがっているうちに夜になり、寝てしまった。
            </p>
          </section>
        </article>
      </main>
    `;

    // 品詞分解表示状態を管理するフラグ
    let analysisVisible = true;

    changeButton.addEventListener('click', () => {
      textElement.innerHTML = translatedContent;
      changeButton.style.display = 'none';
      resetButton.style.display = 'inline-block';
      toggleAnalysisButton.style.display = 'none';
    });

    resetButton.addEventListener('click', () => {
      textElement.innerHTML = originalContent;
      resetButton.style.display = 'none';
      changeButton.style.display = 'inline-block';
      toggleAnalysisButton.style.display = 'inline-block';
      reinitializeAnalysisToggle();
      applyAnalysisVisibility();
    });

    toggleAnalysisButton.addEventListener('click', () => {
      analysisVisible = !analysisVisible;
      applyAnalysisVisibility();
      toggleAnalysisButton.textContent = analysisVisible ? '品詞分解を消す' : '品詞分解を表示する';
    });

    const applyAnalysisVisibility = () => {
      const analysisElements = document.querySelectorAll('.analysis');
      analysisElements.forEach((el) => {
        el.style.display = analysisVisible ? 'block' : 'none';
      });
    };

    const reinitializeAnalysisToggle = () => {
      toggleAnalysisButton.textContent = analysisVisible ? '品詞分解を消す' : '品詞分解を表示する';
    };

    reinitializeAnalysisToggle();
  </script>
</body>
</html>
