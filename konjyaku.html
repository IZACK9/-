<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>今昔物語集</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    #content {
      flex: 1;
      padding: 20px;
      text-align: center;
    }

    #text {
      font-size: 20px;
      margin-bottom: 20px;
    }

    #footer {
      position: sticky;
      bottom: 0;
      background-color: #f0f0f0;
      text-align: center;
      padding: 10px 0;
      border-top: 1px solid #ddd;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      margin: 5px;
    }

    button:hover {
      background-color: #0056b3;
    }

    .analysis {
      font-size: 0.8em; /* 小さい文字サイズ */
      color: gray; /* グレーの文字色 */
      margin-top: 10px; /* 上部に余白を追加 */
    }
  </style>
</head>
<body>
  <header>
    <h1>古文ヘルパー</h1>
    <nav>
      <a href="index.html">ホーム</a>
    </nav>
  </header>
  <div id="content">
    <div id="text">
      <main>
        <article>
   <h2>今昔物語集</h2>
          <section>
            <p>
              今は昔、一条の摂政殿の住み給ひける桃園は今の世尊寺なり。
            </p>
            <div class="analysis">
              今（名詞）<br>
              は（係助詞）<br>
              昔（名詞）<br>
              一条（名詞）<br>
              の（格助詞）<br>
              摂政殿（名詞）<br>
              の（格助詞）<br>
              住み（動詞・連用形・四段活用）<br>
              給ひ（補助動詞・連用形・四段活用）<br>
              ける（助動詞・過去・連体形）<br>
              桃園（名詞）<br>
              は（係助詞）<br>
              今（名詞）<br>
              の（格助詞）<br>
              世尊寺（名詞）<br>
              なり（助動詞・断定・終止形）<br>
            </div>
          </section>
          <section>
            <p>
              そこにて摂政、季の御読経行はれける時に、山・三井寺・奈良のやむごとなき学生どもを選びて、請ぜられたりければ、皆参りたりけるに、夕座を待つほどに、僧ども居並みて、あるいは経を読み、あるいは物語などしてなむ居たりける。
            </p>
            <div class="analysis">
              そこ（指示語）<br>
              にて（格助詞）<br>
              摂政（名詞）<br>
              季（名詞）<br>
              の（格助詞）<br>
              御読経（名詞）<br>
              行は（動詞・未然形・四段活用）<br>
              れ（補助動詞・受身・連用形）<br>
              ける（助動詞・過去・連体形）<br>
              時（名詞）<br>
              に（格助詞）<br>
              山（名詞）<br>
              ・（記号）<br>
              三井寺（名詞）<br>
              ・（記号）<br>
              奈良（名詞）<br>
              の（格助詞）<br>
              やむごとなき（形容詞・連体形）<br>
              学生ども（名詞）<br>
              を（格助詞）<br>
              選び（動詞・連用形・四段活用）<br>
              て（接続助詞）<br>
              請ぜ（動詞・未然形・下二段活用）<br>
              られ（補助動詞・受身・連用形）<br>
              たり（助動詞・完了・連用形）<br>
              けれ（助動詞・過去・已然形）<br>
              ば（接続助詞）<br>
              皆（名詞）<br>
              参り（動詞・連用形・四段活用）<br>
              たり（助動詞・完了・連用形）<br>
              ける（助動詞・過去・連体形）<br>
              に（格助詞）<br>
              夕座（名詞）<br>
              を（格助詞）<br>
              待つ（動詞・連体形・五段活用）<br>
              ほど（名詞）<br>
              に（格助詞）<br>
              僧ども（名詞）<br>
              居並み（動詞・連用形・四段活用）<br>
              て（接続助詞）<br>
              あるいは（接続詞）<br>
              経（名詞）<br>
              を（格助詞）<br>
              読み（動詞・連用形・四段活用）<br>
              あるいは（接続詞）<br>
              物語（名詞）<br>
              など（副助詞）<br>
              して（動詞・連用形・サ変）<br>
              なむ（係助詞）<br>
              居たり（動詞・連用形・四段活用）<br>
              ける（助動詞・過去・連体形）<br>
            </div>
          </section>
          <section>
            <p>
              寝殿の南面を御読経所にしつらひたりければ、その御読経所に居並みてあるほどに南面の山・池などのいみじくおもしろきを見て、山階寺の僧中算が言はく、「あはれ、この殿の木立は異所には似ずかし」と言ひけるを、傍らに木寺の基増といふ僧居て、これを聞くままに、「奈良の法師こそなほ疎き者はあれ。物言ひは賤しき者かな。『木立』とこそ言へ、『木立』と言ふらむよな。うしろめたなきの言葉や」と言ひて、爪をはたはたとす。
            </p>
            <div class="analysis">
              寝殿（名詞）<br>
              の（格助詞）<br>
              南面（名詞）<br>
              を（格助詞）<br>
              御読経所（名詞）<br>
              に（格助詞）<br>
              しつらひ（動詞・連用形・四段活用）<br>
              たり（助動詞・存続・連用形）<br>
              けれ（助動詞・過去・已然形）<br>
              ば（接続助詞）<br>
              その（連体詞）<br>
              御読経所（名詞）<br>
              に（格助詞）<br>
              居並み（動詞・連用形・四段活用）<br>
              て（接続助詞）<br>
              ある（動詞・連体形・ラ変）<br>
              ほど（名詞）<br>
              に（格助詞）<br>
              南面（名詞）<br>
              の（格助詞）<br>
              山（名詞）<br>
              ・（記号）<br>
              池（名詞）<br>
              など（副助詞）<br>
              の（格助詞）<br>
              いみじく（形容詞・連用形）<br>
              おもしろき（形容詞・連体形）<br>
              を（格助詞）<br>
              見て（動詞・連用形・上一段活用）<br>
              山階寺（名詞）<br>
              の（格助詞）<br>
              僧（名詞）<br>
              中算（名詞）<br>
              が（格助詞）<br>
              言はく（動詞・終止形・四段活用・引用）<br>
              「あはれ（感動詞）、この（連体詞）、殿（名詞）、の（格助詞）、木立（名詞）、は（係助詞）、異所（名詞）、に（格助詞）、は（係助詞）、似ず（動詞・未然形・サ変）、かし（終助詞）」<br>
              と（格助詞）<br>
              言ひ（動詞・連用形・四段活用）<br>
              ける（助動詞・過去・連体形）<br>
              を（格助詞）<br>
              傍ら（名詞）<br>
              に（格助詞）<br>
              木寺（名詞）<br>
              の（格助詞）<br>
              基増（名詞）<br>
              と（格助詞）<br>
              いふ（動詞・連体形・四段活用）<br>
              僧（名詞）<br>
              居て（動詞・連用形・四段活用）<br>
              これ（指示語）<br>
              を（格助詞）<br>
              聞く（動詞・連体形・五段活用）<br>
              まま（名詞）<br>
              に（格助詞）<br>
              「奈良（名詞）、の（格助詞）、法師（名詞）、こそ（係助詞）、なほ（副詞）、疎き（形容詞・連体形）、者（名詞）、は（係助詞）、あれ（動詞・命令形・ラ変）。物言ひ（名詞）、は（係助詞）、賤しき（形容詞・連体形）、者（名詞）、かな（終助詞）。『木立』（名詞）、と（格助詞）、こそ（係助詞）、言へ（動詞・命令形・下一段活用）、『木立』（名詞）、と言ふ（動詞・連体形・四段活用）、らむ（助動詞・現在推量・連体形）、よな（終助詞）。うしろめたなき（形容詞・連体形）、の（格助詞）、言葉（名詞）、や（終助詞）」<br>
              と（格助詞）<br>
              言ひ（動詞・連用形・四段活用）<br>
              て（接続助詞）<br>
              爪（名詞）<br>
              を（格助詞）<br>
              はたはた（副詞）<br>
              と（格助詞）<br>
              す（動詞・終止形・サ変）<br>
            </div>
          </section>
          <section>
            <p>
              中算かく言はれて、「悪しく申してけり。さらば御前をば、『小寺の小僧』とこそ申すべかりけれ」と言ひければ、ありとある僧ども皆、これを聞きて、声を放ちておびただしく笑ひけり。
            </p>
            <div class="analysis">
              中算（名詞）<br>
              かく（副詞）<br>
              言は（動詞・未然形・四段活用）<br>
              れて（助動詞・受身・連用形）<br>
              「悪しく（形容詞・連用形）申して（動詞・連用形・サ変）けり（助動詞・過去・終止形）。さらば（接続詞）御前（名詞）を（格助詞）ば（係助詞）、『小寺の小僧』（名詞）と（格助詞）こそ（係助詞）申す（動詞・終止形・サ変）べかり（助動詞・推量・連用形）けれ（助動詞・過去・已然形）」<br>
              と（格助詞）<br>
              言ひ（動詞・連用形・四段活用）<br>
              ければ（助動詞・過去・已然形＋接続助詞）<br>
              ありとある（慣用句）<br>
              僧ども（名詞）<br>
              皆（名詞）<br>
              これ（指示語）<br>
              を（格助詞）<br>
              聞きて（動詞・連用形・四段活用）<br>
              声（名詞）<br>
              を（格助詞）<br>
              放ちて（動詞・連用形・四段活用）<br>
              おびただしく（形容詞・連用形）<br>
              笑ひ（動詞・連用形・四段活用）<br>
              けり（助動詞・過去・終止形）<br>
            </div>
          </section>
          <!-- ここから先も同じ区切りで続けてください -->
          <section>
            <p>
              その時に、摂政殿、この笑ふ声こ聞き給ひて、「何事を笑ふぞ」と問はせ給ひければ、僧どもありのままに申しければ、殿、「これは中算がかく言はむとて、基増が前にて言ひ出だしたる事を、いかでか心を得ずして、基増が、案に落ちてかく言はれたるこそつたなけれ」と仰せ給ひければ、僧どもいよいよ笑ひて、それより後、小寺の小僧といふ異名は付きたるなりけり。「あぢきなく物とがめして、異名付きたる」とてなむ、基増悔しがりける。
            </p>
            <div class="analysis">
              その（連体詞）<br>
              時（名詞）<br>
              に（格助詞）<br>
              摂政殿（名詞）<br>
              この（連体詞）<br>
              笑ふ（動詞・連体形・四段活用）<br>
              声（名詞）<br>
              こ（係助詞）<br>
              聞き（動詞・連用形・四段活用）<br>
              給ひ（補助動詞・連用形・四段活用）<br>
              て（接続助詞）<br>
              「何事（名詞）を（格助詞）笑ふ（動詞・終止形・四段活用）ぞ（終助詞）」<br>
              と（格助詞）<br>
              問は（動詞・未然形・四段活用）<br>
              せ（補助動詞・連用形・尊敬語）<br>
              給ひ（補助動詞・連用形・四段活用）<br>
              けれ（助動詞・過去・已然形）<br>
              ば（接続助詞）<br>
              僧ども（名詞）<br>
              あり（動詞・連用形・ラ変）<br>
              の（格助詞）<br>
              まま（名詞）<br>
              に（格助詞）<br>
              申し（動詞・連用形・サ変）<br>
              けれ（助動詞・過去・已然形）<br>
              ば（接続助詞）<br>
              殿（名詞）<br>
              「これは（指示語）<br>
              中算（名詞）<br>
              が（格助詞）<br>
              かく（副詞）<br>
              言は（動詞・未然形・四段活用）<br>
              む（助動詞・意志・終止形）<br>
              と（格助詞）<br>
              て（接続助詞）<br>
              基増（名詞）<br>
              が（格助詞）<br>
              前（名詞）<br>
              に（格助詞）<br>
              て（接続助詞）<br>
              言ひ（動詞・連用形・四段活用）<br>
              出だし（動詞・連用形・四段活用）<br>
              たる（助動詞・完了・連体形）<br>
              事（名詞）<br>
              を（格助詞）<br>
              いかでか（副詞）<br>
              心（名詞）<br>
              を（格助詞）<br>
              得（動詞・未然形・下一段活用）<br>
              ず（助動詞・打消・連用形）<br>
              して（接続助詞）<br>
              基増（名詞）<br>
              が（格助詞）<br>
              案（名詞）<br>
              に（格助詞）<br>
              落ち（動詞・連用形・四段活用）<br>
              て（接続助詞）<br>
              かく（副詞）<br>
              言は（動詞・未然形・四段活用）<br>
              れ（助動詞・受身・連用形）<br>
              たる（助動詞・完了・連体形）<br>
              こそ（係助詞）<br>
              つたなけれ（形容詞・已然形）<br>
              と（格助詞）<br>
              仰せ（動詞・連用形・サ変）<br>
              給ひ（補助動詞・連用形・四段活用）<br>
              けれ（助動詞・過去・已然形）<br>
              ば（接続助詞）<br>
              僧ども（名詞）<br>
              いよいよ（副詞）<br>
              笑ひ（動詞・連用形・四段活用）<br>
              て（接続助詞）<br>
              それ（指示語）<br>
              より（格助詞）<br>
              後（名詞）<br>
              小寺の小僧（名詞）<br>
              と（格助詞）<br>
              いふ（動詞・連体形・四段活用）<br>
              異名（名詞）<br>
              は（係助詞）<br>
              付き（動詞・連用形・四段活用）<br>
              たる（助動詞・完了・連体形）<br>
              なり（助動詞・断定・終止形）<br>
              けり（助動詞・過去・終止形）<br>
              「あぢきなく（形容詞・連用形）物（名詞）とがめ（動詞・連用形・下二段活用）して（接続助詞）、異名（名詞）付き（動詞・連用形・四段活用）たる（助動詞・完了・連体形）」<br>
              と（格助詞）<br>
              てなむ（係助詞）<br>
              基増（名詞）<br>
              悔しがり（動詞・連用形・四段活用）<br>
              ける（助動詞・過去・終止形）<br>
            </div>
          </section>
        </article>
      </main>
    </div>
  </div>

  <div id="footer">
    <button id="changeButton">現代語訳する</button>
    <button id="resetButton" style="display: none;">もとに戻す</button>
    <button id="toggleAnalysisButton">品詞分解を消す</button>
  </div>

  <script>
    // ボタンとテキストの要素を取得
    const textElement = document.getElementById('text');
    const changeButton = document.getElementById('changeButton');
    const resetButton = document.getElementById('resetButton');
    const toggleAnalysisButton = document.getElementById('toggleAnalysisButton');

    // 元の内容を保存
    const originalContent = textElement.innerHTML;

    // 現代語訳の内容
    const translatedContent = `
      <main>
        <article>
          <h2>今昔物語集 現代語訳</h2>
           <p>
              昔、一条天皇の摂政であった方が住んでいた桃園は、今の世尊寺である。
            </p>
          </section>
          <section>
            <p>
              そこで摂政は、季節ごとに読経の法要を行う際に、比叡山・三井寺・奈良の由緒ある僧たちを選んで招かれたので、皆が参集した。夕方の法要を待つ間、僧たちは居並び、ある者は経を読み、ある者は物語などをして過ごしていた。
            </p>
          </section>
          <section>
            <p>
              寝殿の南側を法要の場所にしつらえていたので、僧たちがその場所に座っていると、南の山や池が非常に美しく見えた。山階寺の僧・中算が「本当に、この殿の木立は他の場所とは違っているなあ」と言ったのを、そばにいた木寺の僧・基増が聞き、「奈良の法師はやはり学がない者がいる。言葉遣いも下品なものだ。『木立』と言うべきなのに、『木立（こだち）』なんて言うのはどういうことか。恥ずかしい言葉遣いだ」と言って、爪をぱちぱちとはじいた。
            </p>
          </section>
          <section>
            <p>
              中算はそう言われて、「悪く申してしまった。では、あなたのことは『小寺の小僧』と言うべきだ」と言い返した。すると、そこにいた僧たちは皆これを聞いて、大声でどっと笑った。
            </p>
          </section>
          <section>
            <p>
              その時、摂政殿はこの笑い声をお聞きになり、「何を笑っているのか」とお尋ねになった。僧たちがありのままを申し上げると、殿は「これは中算がわざと基増の前で言い出したことなのに、基増が気付かずに、まんまと中算の思い通りに返してしまったのは、基増のほうが間抜けだったな」とおっしゃった。僧たちはますます笑い、それから後、「小寺の小僧」というあだ名が基増についた。「つまらないことで人を咎めたばかりにあだ名がついてしまった」といって、基増は悔しがったのであった。
            </p>
        </article>
      </main>
    `;

    // 品詞分解表示状態を管理するフラグ
    let analysisVisible = true;

    // 「現代語訳する」ボタンがクリックされたときの処理
    changeButton.addEventListener('click', () => {
      textElement.innerHTML = translatedContent;
      changeButton.style.display = 'none'; // 現代語訳ボタンを非表示
      resetButton.style.display = 'inline-block'; // もとに戻すボタンを表示
      toggleAnalysisButton.style.display = 'none'; // 品詞分解ボタンを非表示
    });

    // 「もとに戻す」ボタンがクリックされたときの処理
    resetButton.addEventListener('click', () => {
      textElement.innerHTML = originalContent;
      resetButton.style.display = 'none'; // もとに戻すボタンを非表示
      changeButton.style.display = 'inline-block'; // 現代語訳ボタンを表示
      toggleAnalysisButton.style.display = 'inline-block'; // 品詞分解ボタンを再表示

      // 再度「品詞分解を消す」ボタンを機能させるためにイベントリスナーを再登録
      reinitializeAnalysisToggle();
      applyAnalysisVisibility(); // 品詞分解の表示状態を適用
    });

    // 「品詞分解を消す」ボタンがクリックされたときの処理
    toggleAnalysisButton.addEventListener('click', () => {
      analysisVisible = !analysisVisible; // 表示状態をトグル
      applyAnalysisVisibility(); // 表示状態を適用
      toggleAnalysisButton.textContent = analysisVisible ? '品詞分解を消す' : '品詞分解を表示する';
    });

    // 品詞分解の表示状態を適用
    const applyAnalysisVisibility = () => {
      const analysisElements = document.querySelectorAll('.analysis');
      analysisElements.forEach((el) => {
        el.style.display = analysisVisible ? 'block' : 'none';
      });
    };

    // 「品詞分解を消す」ボタンの機能を再登録
    const reinitializeAnalysisToggle = () => {
      const analysisElements = document.querySelectorAll('.analysis');
      toggleAnalysisButton.textContent = analysisVisible ? '品詞分解を消す' : '品詞分解を表示する';
    };

    // 初期化時に「品詞分解を消す」ボタンの機能を登録
    reinitializeAnalysisToggle();
  </script>
</body>
</html>
