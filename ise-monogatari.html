<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>伊勢物語</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    #content {
      flex: 1;
      padding: 20px;
      text-align: center;
    }

    #text {
      font-size: 20px;
      margin-bottom: 20px;
    }

    #footer {
      position: sticky;
      bottom: 0;
      background-color: #f0f0f0;
      text-align: center;
      padding: 10px 0;
      border-top: 1px solid #ddd;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      margin: 5px;
    }

    button:hover {
      background-color: #0056b3;
    }

    .analysis {
      font-size: 0.8em; /* 小さい文字サイズ */
      color: gray; /* グレーの文字色 */
      margin-top: 10px; /* 上部に余白を追加 */
    }
  </style>
</head>
<body>
  <header>
    <h1>古文ヘルパー</h1>
    <nav>
      <a href="index.html">ホーム</a>
    </nav>
  </header>
  <div id="content">
    <div id="text">
      <main>
        <article>
          <h2>伊勢物語</h2>
           <p>  <p>
      むかし、西院の帝と申す帝おはしましけり。その帝のみこたかい子と申すいまそがりけり。
      そのみこうせ給ひて、御葬の夜、その宮隣なりける男、御葬見むとて、女車に相乗りて出でたりけり。
      いと久しう率て出でたてまつらず。うち泣きてやみぬべかりけるあひだに、天の下の色好み、源の至といふ人、
      これももの見るに、この車を女車と見て、寄り来てとかくなまめくあひだに、かの至、蛍をとりて女の車に入れたりけるを、
      車なりける人、この蛍のともす火にや見ゆらむ、ともし消ちなむずるとて、乗れる男のよめる。
    </p>
    <div class="analysis">
      むかし（副詞）、西院（名詞）の（助詞）帝（名詞）と（助詞）申す（動詞・連体形・四段活用）帝（名詞）おはしまし（動詞・連用形・敬語）けり（助動詞・過去）。
      その（連体詞）帝（名詞）の（助詞）みこ（名詞）たかい子（名詞）と（助詞）申す（動詞・連体形・四段活用）いまそ（動詞・連体形・四段活用）がり（助動詞・存続）けり（助動詞・過去）。
      その（連体詞）みこ（名詞）うせ（動詞・連用形・下二段活用）給ひ（動詞・連用形・尊敬語）て（助詞）、御葬（名詞）の（助詞）夜（名詞）、その（連体詞）宮（名詞）隣（名詞）なり（動詞・連用形・ラ変）ける（助動詞・過去）男（名詞）、御葬（名詞）見（動詞・未然形・四段活用）む（助動詞・意志）と（助詞）て（助詞）、女車（名詞）に（助詞）相乗り（動詞・連用形・四段活用）て（助詞）出で（動詞・連用形・下二段活用）たり（助動詞・存続）けり（助動詞・過去）。
      いと（副詞）久しう（形容詞・連用形）率て（動詞・連用形・下二段活用）出で（動詞・連用形・下二段活用）たてまつら（動詞・未然形・四段活用）ず（助動詞・打消）。
      うち泣き（動詞・連用形・四段活用）て（助詞）やみ（動詞・連用形・四段活用）ぬ（助動詞・完了）べかり（助動詞・推量）ける（助動詞・過去）あひだ（名詞）に（助詞）、天の下（名詞）の（助詞）色好み（名詞）、源の至（名詞）と（助詞）いふ（動詞・連体形・四段活用）人（名詞）、これ（指示詞）も（係助詞）もの（名詞）見る（動詞・連体形・上一段活用）に（助詞）、この（連体詞）車（名詞）を（助詞）女車（名詞）と（助詞）見（動詞・連用形・四段活用）て（助詞）、寄り（動詞・連用形・四段活用）来（動詞・連用形・カ変）て（助詞）とかく（副詞）なまめく（動詞・終止形・四段活用）あひだ（名詞）に（助詞）、かの（連体詞）至（名詞）、蛍（名詞）を（助詞）とり（動詞・連用形・四段活用）て（助詞）女の車（名詞）に（助詞）入れ（動詞・連用形・下一段活用）たり（助動詞・存続）ける（助動詞・過去）を（助詞）、車なりける人（名詞）、この蛍（名詞）の（助詞）ともす（動詞・連体形・四段活用）火（名詞）に（助詞）や（係助詞）見ゆ（動詞・終止形・下二段活用）らむ（助動詞・推量）、ともし（名詞）消ち（動詞・連用形・四段活用）なむずる（助動詞・強意＋推量）とて（助詞）、乗れる（動詞・連体形・四段活用）男（名詞）の（助詞）よめる（動詞・連体形・下二段活用）。
    </div>
    <p>
      A　出でていなば限りなるべみともし消ち年へぬるかと泣く声を聞け
    </p>
    <div class="analysis">
      出で（動詞・連用形・下二段活用）て（助詞）いな（動詞・未然形・四段活用）ば（助詞）限り（名詞）なる（助動詞・断定）べ（助動詞・推量）み（助詞）ともし（名詞）消ち（動詞・連用形・四段活用）年（名詞）へ（助詞）ぬる（助動詞・完了）か（係助詞）と（助詞）泣く（動詞・連体形・四段活用）声（名詞）を（助詞）聞け（動詞・命令形・下一段活用）
    </div>
    <p>
      かの至、返し、
    </p>
    <p>
      B　いとあはれ泣くぞ聞こゆるともし消ち消ゆるものとも我は知らずな
    </p>
    <div class="analysis">
      いと（副詞）あはれ（形容動詞・連用形）泣く（動詞・連体形・四段活用）ぞ（係助詞）聞こゆる（動詞・連体形・下二段活用）ともし（名詞）消ち（動詞・連用形・四段活用）消ゆる（動詞・連体形・下二段活用）もの（名詞）とも（助詞）我（代名詞）は（係助詞）知ら（動詞・未然形・四段活用）ず（助動詞・打消）な（終助詞）
    </div>
    <p>
      天の下の色好みの歌にては、猶ぞありける。至は順が祖父なり。
    </p>
    <div class="analysis">
      天の下（名詞）の（助詞）色好み（名詞）の（助詞）歌（名詞）にて（助詞）は（係助詞）、猶（副詞）ぞ（係助詞）あり（動詞・連用形・ラ変）ける（助動詞・過去）。至（名詞）は（係助詞）順（名詞）が（助詞）祖父（名詞）なり（動詞・終止形・ラ変）。
    </div>
        </article>
      </main>
    </div>
  </div>

  <div id="footer">
    <button id="changeButton">現代語訳する</button>
    <button id="resetButton" style="display: none;">もとに戻す</button>
    <button id="toggleAnalysisButton">品詞分解を消す</button>
  </div>

  <script>
    // ボタンとテキストの要素を取得
    const textElement = document.getElementById('text');
    const changeButton = document.getElementById('changeButton');
    const resetButton = document.getElementById('resetButton');
    const toggleAnalysisButton = document.getElementById('toggleAnalysisButton');

    // 元の内容を保存
    const originalContent = textElement.innerHTML;

    // 現代語訳の内容
    const translatedContent = `
      <main>
        <article>
          <h2>伊勢物語 現代語訳</h2>
         
    <p>
      昔、西院の帝（天皇）という方がおられました。その帝の皇子で高貴な方がいらっしゃいましたが、亡くなられました。<br>
      葬儀の夜、皇子の御殿の隣に住む男が、葬儀を見ようと思い、女の車に同乗して外へ出かけました。長い間外へ連れて行ってあげられなかったので、女は泣きやみそうなほどでした。<br>
      そのとき、世間で名高い色好み、源の至（みなもとのいたる）という人も物見に来ていました。至はその車が女車だと気づき、近寄ってきてあれこれと雅に振る舞います。やがて至は蛍を捕まえて女車に入れます。<br>
      車に乗っていた女は「この蛍のともす火で顔が見えてしまうかもしれない、火を消してしまおう」と言い、同乗していた男が歌を詠みました。<br>
      <strong>A　外へ出てしまえば、もう会えなくなってしまうから、火を消してしまいましょう。長い年月を過ごしたのだと泣く声が聞こえる</strong><br>
      それを聞いた至が、返歌を詠みました。<br>
      <strong>B　本当に哀しく泣く声が聞こえるが、火を消して消えるものかどうか私は知らないよ</strong><br>
      世間の色好みの歌としても、やはり素晴らしいものでした。なお、至は順の祖父にあたります。
    </p>
        </article>
      </main>
    `;

    // 品詞分解表示状態を管理するフラグ
    let analysisVisible = true;

    // 「現代語訳する」ボタンがクリックされたときの処理
    changeButton.addEventListener('click', () => {
      textElement.innerHTML = translatedContent;
      changeButton.style.display = 'none'; // 現代語訳ボタンを非表示
      resetButton.style.display = 'inline-block'; // もとに戻すボタンを表示
      toggleAnalysisButton.style.display = 'none'; // 品詞分解ボタンを非表示
    });

    // 「もとに戻す」ボタンがクリックされたときの処理
    resetButton.addEventListener('click', () => {
      textElement.innerHTML = originalContent;
      resetButton.style.display = 'none'; // もとに戻すボタンを非表示
      changeButton.style.display = 'inline-block'; // 現代語訳ボタンを表示
      toggleAnalysisButton.style.display = 'inline-block'; // 品詞分解ボタンを再表示

      // 再度「品詞分解を消す」ボタンを機能させるためにイベントリスナーを再登録
      reinitializeAnalysisToggle();
      applyAnalysisVisibility(); // 品詞分解の表示状態を適用
    });

    // 「品詞分解を消す」ボタンがクリックされたときの処理
    toggleAnalysisButton.addEventListener('click', () => {
      analysisVisible = !analysisVisible; // 表示状態をトグル
      applyAnalysisVisibility(); // 表示状態を適用
      toggleAnalysisButton.textContent = analysisVisible ? '品詞分解を消す' : '品詞分解を表示する';
    });

    // 品詞分解の表示状態を適用
    const applyAnalysisVisibility = () => {
      const analysisElements = document.querySelectorAll('.analysis');
      analysisElements.forEach((el) => {
        el.style.display = analysisVisible ? 'block' : 'none';
      });
    };

    // 「品詞分解を消す」ボタンの機能を再登録
    const reinitializeAnalysisToggle = () => {
      const analysisElements = document.querySelectorAll('.analysis');
      toggleAnalysisButton.textContent = analysisVisible ? '品詞分解を消す' : '品詞分解を表示する';
    };

    // 初期化時に「品詞分解を消す」ボタンの機能を登録
    reinitializeAnalysisToggle();
  </script>
</body>
</html>
