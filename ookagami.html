<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>大鏡</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    #content {
      flex: 1;
      padding: 20px;
      text-align: center;
    }

    #text {
      font-size: 20px;
      margin-bottom: 20px;
    }

    #footer {
      position: sticky;
      bottom: 0;
      background-color: #f0f0f0;
      text-align: center;
      padding: 10px 0;
      border-top: 1px solid #ddd;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      margin: 5px;
    }

    button:hover {
      background-color: #0056b3;
    }

    .analysis {
      font-size: 0.8em; /* 小さい文字サイズ */
      color: gray; /* グレーの文字色 */
      margin-top: 10px; /* 上部に余白を追加 */
    }
  </style>
</head>
<body>
  <header>
    <h1>古文ヘルパー</h1>
    <nav>
      <a href="index.html">ホーム</a>
    </nav>
  </header>
  <div id="content">
    <div id="text">
      <main>
        <article>
          <h2>大鏡</h2>
     <p>
  いとしきことは、<br>
  かくやむごとなくおはします殿の、<br>
  貫之のぬしが家におはしましたりしこそ、<br>
  「なほ和歌はめざましきことなりかし」と、<br>
  おぼえはべりしか。
</p>
<div class="analysis">
  いとしき（形容詞・連体形）こと（名詞）は（係助詞）、
  かく（副詞）やむごとなく（形容動詞・連用形）おはします（動詞・四段活用・連体形）殿（名詞）の（格助詞）、
  貫之（名詞）の（格助詞）ぬし（名詞）が（格助詞）家（名詞）に（格助詞）おはしましたり（動詞・連用形）し（助動詞・連体形）こそ（係助詞）、
  「なほ（副詞）和歌（名詞）は（係助詞）めざましき（形容詞・連体形）こと（名詞）なり（助動詞・終止形）かし（終助詞）」と（格助詞）、
  おぼえ（動詞・連用形）はべり（補助動詞・連用形）しか（助動詞・過去・已然形）。
</div>

<p>
  正月一日つけさせたまふべき魚袋の<br>
  損なはれたりければ、<br>
  繕はせたまふほど、<br>
  まづ貞信公の御もとに参らせたまひて<br>
  かうかうのことのはべれば、<br>
  内に遅参のよしを申させたまひければ
</p>
<div class="analysis">
  正月（名詞）一日（名詞）つけ（動詞・連用形）させ（使役助動詞・連用形）たまふ（尊敬語・終止形）べき（助動詞）魚袋（名詞）の（格助詞）
  損なはれ（動詞・受身形・連用形）たり（助動詞・存続）けれ（助動詞・已然形）ば（接続助詞）、
  繕は（動詞・連用形）せ（使役助動詞・連用形）たまふ（尊敬語・終止形）ほど（名詞）、
  まづ（副詞）貞信公（名詞）の（格助詞）御もと（名詞）に（格助詞）参らせ（動詞・使役形・連用形）たまひ（尊敬語・連用形）て（接続助詞）
  かうかう（副詞）の（格助詞）こと（名詞）の（格助詞）はべれ（補助動詞・已然形）ば（接続助詞）、
  内（名詞）に（格助詞）遅参（名詞）の（格助詞）よし（名詞）を（格助詞）申さ（動詞・未然形）せ（使役助動詞・連用形）たまひ（尊敬語・連用形）けれ（助動詞・已然形）ば（接続助詞）
</div>

<p>
  おほきおとど驚かせたまひて、年ごろ持たせたまへりける取り出でさせたまひて、<br>
  やがてあえものとて、たてまつらせたまふを、ことうるはしく松の枝につけさせたまへり。
</p>
<div class="analysis">
  おほきおとど（名詞）驚か（動詞・未然形）せ（使役助動詞・連用形）たまひ（尊敬語・連用形）て（接続助詞）、
  年ごろ（名詞）持た（動詞・連用形）せ（使役助動詞・連用形）たまへ（尊敬語・已然形）り（助動詞・存続）ける（助動詞・連体形）取り出で（動詞・連用形）させ（使役助動詞・連用形）たまひ（尊敬語・連用形）て（接続助詞）、
  やがて（副詞）あえもの（名詞）とて（接続助詞）、たてまつら（動詞・未然形）せ（使役助動詞・連用形）たまふ（尊敬語・終止形）を（格助詞）、
  こと（名詞）うるはしく（形容詞・連用形）松（名詞）の（格助詞）枝（名詞）に（格助詞）つけ（動詞・連用形）させ（使役助動詞・連用形）たまへ（尊敬語・已然形）り（助動詞・存続）。
</div>

<p>
  その御かしこまりの　よろこびは、御心の及ばぬにしもおはしまさざらめど、<br>
  「なお貫之に召さむ」とおぼしめして、わたりおはしましたるを待ちうけましけむ面目、<br>
  いかがおろかなるべきな。
</p>
<div class="analysis">
  その（連体詞）御かしこまり（名詞）の（格助詞）よろこび（名詞）は（係助詞）、
  御心（名詞）の（格助詞）及ば（動詞・未然形）ぬ（打消助動詞）に（格助詞）しも（副助詞）おはしまさ（動詞・未然形）ざら（打消助動詞・未然形）め（推量助動詞・已然形）ど（接続助詞）、
  「なお（副詞）貫之（名詞）に（格助詞）召さ（動詞・未然形）む（意志助動詞）」と（引用助詞）おぼしめし（動詞・連用形）て（接続助詞）、
  わたり（動詞・連用形）おはしましたる（尊敬表現）を（格助詞）待ちうけ（動詞・連用形）まし（助動詞・連用形）けむ（助動詞・連体形）面目（名詞）、
  いかが（副詞）おろか（形容動詞・連体形）なる（助動詞）べき（推量助動詞）な（終助詞）。
</div>

<p>
  吹く風に氷とけたる池の魚　千代まで松のかげに隠れむ集に書き入れたる、ことわりなりかし。
</p>
<div class="analysis">
  吹く（動詞・連体形）風（名詞）に（格助詞）氷（名詞）とけ（動詞・連用形）たる（助動詞・完了・連体形）池（名詞）の（格助詞）魚（名詞）
  千代（名詞）まで（副助詞）松（名詞）の（格助詞）かげ（名詞）に（格助詞）隠れ（動詞・未然形）む（推量助動詞・終止形）
  集（名詞）に（格助詞）書き入れ（動詞・連用形）たる（助動詞・完了・連体形）、ことわり（名詞）なり（助動詞・終止形）かし（終助詞）。
</div>
        </article>
      </main>
    </div>
  </div>

  <div id="footer">
    <button id="changeButton">現代語訳する</button>
    <button id="resetButton" style="display: none;">もとに戻す</button>
    <button id="toggleAnalysisButton">品詞分解を消す</button>
  </div>

  <script>
    // ボタンとテキストの要素を取得
    const textElement = document.getElementById('text');
    const changeButton = document.getElementById('changeButton');
    const resetButton = document.getElementById('resetButton');
    const toggleAnalysisButton = document.getElementById('toggleAnalysisButton');

    // 元の内容を保存
    const originalContent = textElement.innerHTML;

    // 現代語訳の内容
    const translatedContent = `
      <main>
        <article>
          <h2>今物語 現代語訳</h2>
       <p>
  とても心に残っているのは、<br>
  このように身分が高くいらっしゃる殿が、<br>
  貫之の主人の家においでになったときのことです。<br>
  「やはり和歌はすばらしいものだなあ」と、<br>
  思ったことでした。
</p>

<p>
  正月一日にお付けになるはずの魚袋が壊れてしまったので、<br>
  それを修理させている間、<br>
  まず貞信公のもとに伺って事情を申し上げると、<br>
  宮中には遅れて参上する旨をお伝えになりました。
</p>

<p>
  おおきなお殿様が驚かれて、長年持っていらしたものを取り出され、<br>
  そのままあえ物として差し上げ、それを丁寧に松の枝に付けてくださいました。
</p>

<p>
  そのご配慮の喜びは、<br>
  ご自身の思いが及ばぬことではないでしょうが、<br>
  「やはり貫之をお呼びしよう」と思われて、<br>
  お越しになるのをお待ちになっていたその心遣い、<br>
  どれほど感激したことでしょうか。
</p>

<p>
  吹く風で氷が溶けた池の魚が、<br>
  千年の後まで松のかげに隠れている――<br>
  集に書き留めておくのも当然のことだと思います。
</p>
        </article>
      </main>
    `;

    // 品詞分解表示状態を管理するフラグ
    let analysisVisible = true;

    // 「現代語訳する」ボタンがクリックされたときの処理
    changeButton.addEventListener('click', () => {
      textElement.innerHTML = translatedContent;
      changeButton.style.display = 'none'; // 現代語訳ボタンを非表示
      resetButton.style.display = 'inline-block'; // もとに戻すボタンを表示
      toggleAnalysisButton.style.display = 'none'; // 品詞分解ボタンを非表示
    });

    // 「もとに戻す」ボタンがクリックされたときの処理
    resetButton.addEventListener('click', () => {
      textElement.innerHTML = originalContent;
      resetButton.style.display = 'none'; // もとに戻すボタンを非表示
      changeButton.style.display = 'inline-block'; // 現代語訳ボタンを表示
      toggleAnalysisButton.style.display = 'inline-block'; // 品詞分解ボタンを再表示

      // 再度「品詞分解を消す」ボタンを機能させるためにイベントリスナーを再登録
      reinitializeAnalysisToggle();
      applyAnalysisVisibility(); // 品詞分解の表示状態を適用
    });

    // 「品詞分解を消す」ボタンがクリックされたときの処理
    toggleAnalysisButton.addEventListener('click', () => {
      analysisVisible = !analysisVisible; // 表示状態をトグル
      applyAnalysisVisibility(); // 表示状態を適用
      toggleAnalysisButton.textContent = analysisVisible ? '品詞分解を消す' : '品詞分解を表示する';
    });

    // 品詞分解の表示状態を適用
    const applyAnalysisVisibility = () => {
      const analysisElements = document.querySelectorAll('.analysis');
      analysisElements.forEach((el) => {
        el.style.display = analysisVisible ? 'block' : 'none';
      });
    };

    // 「品詞分解を消す」ボタンの機能を再登録
    const reinitializeAnalysisToggle = () => {
      const analysisElements = document.querySelectorAll('.analysis');
      toggleAnalysisButton.textContent = analysisVisible ? '品詞分解を消す' : '品詞分解を表示する';
    };

    // 初期化時に「品詞分解を消す」ボタンの機能を登録
    reinitializeAnalysisToggle();
  </script>
</body>
</html>
