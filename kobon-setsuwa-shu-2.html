<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>古本説話集2</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    #content {
      flex: 1;
      padding: 20px;
      text-align: center;
    }

    #text {
      font-size: 20px;
      margin-bottom: 20px;
    }

    #footer {
      position: sticky;
      bottom: 0;
      background-color: #f0f0f0;
      text-align: center;
      padding: 10px 0;
      border-top: 1px solid #ddd;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      margin: 5px;
    }

    button:hover {
      background-color: #0056b3;
    }

    .analysis {
      font-size: 0.8em; /* 小さい文字サイズ */
      color: gray; /* グレーの文字色 */
      margin-top: 10px; /* 上部に余白を追加 */
    }
  </style>
</head>
<body>
  <header>
    <h1>古文ヘルパー</h1>
    <nav>
      <a href="index.html">ホーム</a>
    </nav>
  </header>
  <div id="content">
    <div id="text">
      <main>
        <article>
          <h2>古本説話集2</h2>
          <p>
      今は昔、式部大輔匡衡、学生にて、いみじき物なり。宇治大納言2)のもとにありけり。
    </p>
    <div class="analysis">
      今（副詞）は（係助詞）昔（名詞）、式部大輔（固有名詞）匡衡（固有名詞）、学生（名詞）にて（助詞）、
      いみじき（形容詞・連体形）物（名詞）なり（助動詞・連用形）。宇治大納言（固有名詞）2)（補助記号）の（助詞）もと（名詞）に（助詞）あり（動詞・連用形・ラ行変格活用）けり（助動詞・過去）。
    </div>
    <p>
      才は極めてめでたけれど、見目はいとしもなし。丈高く、指し肩にて、みぐるしかりければ、女房ども、「言ひまさぐりて、笑はむ」とて、和琴(わごん)を指し出だして、
      「よろづの事、知り給ひたなるを、これ弾き給へ。聞かむ」と、言ひければ、詠みて
    </p>
    <div class="analysis">
      才（名詞）は（係助詞）極めて（副詞）めでたけれ（形容詞・已然形）ど（接続助詞）、見目（名詞）は（係助詞）いと（副詞）しも（係助詞）なし（形容詞・終止形）。
      丈（名詞）高く（形容詞・連用形）、指し肩（名詞）にて（助詞）、みぐるしかり（形容詞・連用形）けれ（助動詞・已然形）ば（助詞）、女房ども（名詞）、
      「言ひ（動詞・連用形・四段活用）まさぐりて（動詞・連用形・四段活用）、笑は（動詞・未然形・四段活用）む（助動詞・意志）」と（助詞）て（助詞）、
      和琴（名詞）（わごん）（名詞）を（助詞）指し出だして（動詞・連用形・下二段活用）、
      「よろづの（名詞）事（名詞）、知り（動詞・連用形・四段活用）給ひ（補助動詞・連用形）た（助動詞・過去）なる（助動詞・推定）を（助詞）、
      これ（指示詞）弾き（動詞・連用形・四段活用）給へ（補助動詞・命令形）。聞か（動詞・未然形・四段活用）む（助動詞・意志）」と（助詞）、
      言ひ（動詞・連用形・四段活用）けれ（助動詞・過去）ば（助詞）、詠み（動詞・連用形・四段活用）て（助詞）。
    </div>
    <p>
      逢坂の関のあなたもまた見ねば東の事も知られざりけり
    </p>
    <div class="analysis">
      逢坂（名詞）の（助詞）関（名詞）の（助詞）あなた（名詞）も（係助詞）また（副詞）見（動詞・未然形・上一段活用）ねば（助詞）、
      東（名詞）の（助詞）事（名詞）も（係助詞）知ら（動詞・未然形・四段活用）れ（助動詞・可能）ざり（助動詞・打消）けり（助動詞・過去）。
    </div>
    <p>
      と、言ひたりければ、女房どもえ笑はで、やはらづつ引き入りにけり。
    </p>
    <div class="analysis">
      と（助詞）、言ひ（動詞・連用形・四段活用）たり（助動詞・存続）けれ（助動詞・已然形）ば（助詞）、
      女房ども（名詞）え（副詞）笑は（動詞・未然形・四段活用）で（助詞）、やはら（副詞）づつ（接尾語）引き入り（動詞・連用形・カ行四段活用）に（助詞）けり（助動詞・過去）。
    </div>
    <p>
      同じ匡衡、つかさ申しけるに、えならで嘆きけるころ、殿上人、大井に行きて、となせにさし上り歩きて遊ぶままに、人々、歌詠みけるに、匡衡かくなん詠みたりける。
    </p>
    <div class="analysis">
      同じ（連体詞）匡衡（固有名詞）、つかさ（名詞）申し（動詞・連用形・サ行四段活用）ける（助動詞・過去）に（助詞）、
      え（副詞）なら（形容詞・未然形）で（助詞）嘆き（動詞・連用形・四段活用）ける（助動詞・過去）ころ（名詞）、
      殿上人（名詞）、大井（名詞）に（助詞）行き（動詞・連用形・四段活用）て（助詞）、となせ（名詞）に（助詞）さし上り（動詞・連用形・ラ行四段活用）歩き（動詞・連用形・四段活用）て（助詞）遊ぶ（動詞・連体形・四段活用）まま（名詞）に（助詞）、
      人々（名詞）、歌（名詞）詠み（動詞・連用形・四段活用）ける（助動詞・過去）に（助詞）、匡衡（固有名詞）かく（副詞）なん（係助詞）詠み（動詞・連用形・四段活用）たり（助動詞・存続）ける（助動詞・過去）。
    </div>
    <p>
      川舟に乗りて心の行くときは沈める身ともおぼえざりけり
    </p>
    <div class="analysis">
      川舟（名詞）に（助詞）乗り（動詞・連用形・四段活用）て（助詞）心（名詞）の（助詞）行く（動詞・連体形・カ行四段活用）とき（名詞）は（係助詞）、
      沈める（動詞・連体形・下二段活用）身（名詞）とも（助詞）おぼえ（動詞・連用形・ヤ行下二段活用）ざり（助動詞・打消）けり（助動詞・過去）。
    </div>
    <p>
      赤染の衛門が男なり。
    </p>
    <div class="analysis">
      赤染の衛門（固有名詞）が（助詞）男（名詞）なり（助動詞・断定）。
    </div>
        </article>
      </main>
    </div>
  </div>

  <div id="footer">
    <button id="changeButton">現代語訳する</button>
    <button id="resetButton" style="display: none;">もとに戻す</button>
    <button id="toggleAnalysisButton">品詞分解を消す</button>
  </div>

  <script>
    // ボタンとテキストの要素を取得
    const textElement = document.getElementById('text');
    const changeButton = document.getElementById('changeButton');
    const resetButton = document.getElementById('resetButton');
    const toggleAnalysisButton = document.getElementById('toggleAnalysisButton');

    // 元の内容を保存
    const originalContent = textElement.innerHTML;

    // 現代語訳の内容
    const translatedContent = `
      <main>
        <article>
          <h2>古本説話集2 現代語訳</h2>
          <p>
     <br>
      昔、式部大輔の匡衡は、学生の頃から非常に優れた人物でした。彼は宇治大納言のもとに仕えていました。<br>
      匡衡の才能は非常に素晴らしかったものの、容姿はあまり優れておらず、背が高く猫背だったため、見た目が悪いとされていました。<br>
      女房たちは彼をからかおうと、和琴を差し出して「何でも知っていると聞いていますが、これを弾いてください。聞きたいです」と言いました。<br>
      すると匡衡は次のように詠みました。<br>
      「逢坂の関の向こう側もまだ見ていないので、東のことも分かりません。」<br>
      この歌を聞いた女房たちは笑うことができず、静かに引き下がりました。<br>
      <br>
      後に匡衡が役職を任された頃、嘆きつつも、殿上人たちが大井川で舟に乗り、歌を詠む遊びをしていた際、匡衡は次のように詠みました。<br>
      「川舟に乗って心が自由になるときは、沈んでいる自分の身だと感じることはありません。」<br>
      この匡衡は、赤染衛門の夫でした。
    </p>
        </article>
      </main>
    `;

    // 品詞分解表示状態を管理するフラグ
    let analysisVisible = true;

    // 「現代語訳する」ボタンがクリックされたときの処理
    changeButton.addEventListener('click', () => {
      textElement.innerHTML = translatedContent;
      changeButton.style.display = 'none'; // 現代語訳ボタンを非表示
      resetButton.style.display = 'inline-block'; // もとに戻すボタンを表示
      toggleAnalysisButton.style.display = 'none'; // 品詞分解ボタンを非表示
    });

    // 「もとに戻す」ボタンがクリックされたときの処理
    resetButton.addEventListener('click', () => {
      textElement.innerHTML = originalContent;
      resetButton.style.display = 'none'; // もとに戻すボタンを非表示
      changeButton.style.display = 'inline-block'; // 現代語訳ボタンを表示
      toggleAnalysisButton.style.display = 'inline-block'; // 品詞分解ボタンを再表示

      // 再度「品詞分解を消す」ボタンを機能させるためにイベントリスナーを再登録
      reinitializeAnalysisToggle();
      applyAnalysisVisibility(); // 品詞分解の表示状態を適用
    });

    // 「品詞分解を消す」ボタンがクリックされたときの処理
    toggleAnalysisButton.addEventListener('click', () => {
      analysisVisible = !analysisVisible; // 表示状態をトグル
      applyAnalysisVisibility(); // 表示状態を適用
      toggleAnalysisButton.textContent = analysisVisible ? '品詞分解を消す' : '品詞分解を表示する';
    });

    // 品詞分解の表示状態を適用
    const applyAnalysisVisibility = () => {
      const analysisElements = document.querySelectorAll('.analysis');
      analysisElements.forEach((el) => {
        el.style.display = analysisVisible ? 'block' : 'none';
      });
    };

    // 「品詞分解を消す」ボタンの機能を再登録
    const reinitializeAnalysisToggle = () => {
      const analysisElements = document.querySelectorAll('.analysis');
      toggleAnalysisButton.textContent = analysisVisible ? '品詞分解を消す' : '品詞分解を表示する';
    };

    // 初期化時に「品詞分解を消す」ボタンの機能を登録
    reinitializeAnalysisToggle();
  </script>
</body>
</html>
